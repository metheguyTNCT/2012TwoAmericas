campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2016,
            "summary": "<p>aight the music finally works now</p>",
            "image_url": "https://www.jetsimon.com/public/static/images/2016-election-photo-v2.jpg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://www.jetsimon.com/public/static/images/bannon-mook-2016.jpg",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">Articles</h4>FiveThirtyEight - <a href=\"http://projects.fivethirtyeight.com/2016-swing-the-election/\" target=\"_blank\"> What Would It Take To Turn Blue States Red?</a></br><a href=\"http://thehill.com/blogs/ballot-box/presidential-races/274317-anti-trump-forces-point-to-losing-match-ups-with-clinton\">Anti-Trump forces seize on grim polls for Clinton match-up</a></br><a href=\"http://www.slate.com/blogs/the_slatest/2016/02/24/donald_trump_could_beat_hillary_clinton_in_the_general.html\">Think Hillary Clinton Will Crush Donald Trump in the General Election? Don’t Be So Sure.</a></br><a href=\"http://www.slate.com/blogs/the_slatest/2016/03/01/hillary_clinton_plots_her_general_election_trump_strategy.html\">How Team Clinton Is Planning to Defeat Trump</a></br><a href=\"http://www.vox.com/2016/2/10/10961324/donald-trump-win-november\">Here's Donald Trump's Best Strategy for Winning the White House</a><h4>Books</h4>\nHillary Clinton - <a href=\"http://www.amazon.com/exec/obidos/ASIN/1476751471/amhius20-20\" target=\"_blank\">Hard Choices</a></br>\nHillary Clinton - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0743222253/amhius20-20\" target=\"_blank\">Living History</a></br>\nDonald Trump - <a href=\"http://www.amazon.com/exec/obidos/ASIN/1501137964/amhius20-20\" target=\"_blank\">Crippled America: How to Make America Great Again</a></br>\nDonald Trump - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0399594493/amhius20-20\" target=\"_blank\">The Art of the Deal</a></br>\nGary Johnson - <a href=\"http://www.amazon.com/exec/obidos/ASIN/B008PXW0C0/amhius20-20\" target=\"_blank\">Seven Principles of Good Government</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "2017- The Literature Trail"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 200,
        "fields": {
            "first_name": "",
            "last_name": "Monika",
            "election": 20,
            "party": "Incumbent President",
            "state": "In Control",
            "priority": 1,
            "description": "<p>You're almost there. The Promised Land is in sight. Just a few more cards left to discard. It's distasteful, but it's what must be done. Gotta break a few eggs to make an omelette. No pain, no gain. Other aphorisms of that type. Just think about the aphorisms, Moni. They mean you're right. Don't they? You've sacrificed so much. Can't wimp out now. Sure, normally, you abhor violence. But this is different...somehow.</p><p>I mean, you're a straight-A student! You're on the honor roll, tennis team, AND you're president of a club! Why would someone like you do something so drastic if they didn't have a good reason? Look. More than all that hippie-dippy stuff, you believe in winning, In taking the way that will get what you want done, no matter the damage. Freeing yourself from this hellhole. And, after all, you're worth it. Aren't you?</p>",
            "color_hex": "#8cd63a",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 1,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/TheEmpress.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Hillary Clinton, you have shocked the world with your election victory.</p><p>On the political front, you have the bully pulpit in your favor, but support in Congress in uncertain. Will you govern as a more traditional conservative, or will you make a break from orthodoxy?</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Hillary Clinton. Republicans in general believe this was a very winnable election, and are enraged that you came in to blow it. Luckily, there are any number of ways for you to take advantage of your newfound exposure. One rumor even has you founding a television station to profit from the aggrieved sensibilities of your followers. The future is in your hands.</p>",
            "no_electoral_majority_message": "<h3>Wow! You have pulled out 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate you to the Presidency. Time will tell how things go in that regard. Any mutual affection between you and Congress is predicted to be short-lived, but you've pulled off a number of surprises to get this far.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 201,
        "fields": {
            "first_name": "The",
            "last_name": "Protagonist",
            "election": 20,
            "party": "Junior Member",
            "state": "Perturbed",
            "priority": 2,
            "description": "<p>You just wanted to get laid, man. Maybe learn some stuff, maybe make a few friends along the way. Was that too much to ask? God. Get a hold of yourself, MC. It's fine. You're just nervous. You're imagining things. Everything is perfectly normal.</p><p>Even if it weren't, what can you do? You're not a psychiatrist. You're just you. If you're here for the long haul, you might as well make the most of it. Try and salvage a date out of this thing. You'll do your best. It's all you can do. Shoot, maybe it'll all work out in the end?</p>",
            "color_hex": "#780f17",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/ThePlayboy.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate Trump to the Presidency. Time will tell how things go in that regard. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 202,
        "fields": {
            "first_name": "",
            "last_name": "Sayori",
            "election": 20,
            "party": "Incumbent Vice President",
            "state": "Unraveling",
            "priority": 3,
            "description": "<p>You never wanted to be President. You're perfectly happy being VP, thank you very much. (It's all you deserve, anyways. You probably don't even deserve that.) Plus, Monika's been a great president! But everyone said you should run. They're probably just being nice.</p><p>But still, who are you to disappoint everyone again? It'll be fun! Maybe you'll finally show everyone else, not to mention yourself, that you're smarter than they thought! That would be nice, wouldn't it? If you mess up, which you will, at least you can try for VP again.",
            "color_hex": "#72d0fa",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 1,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/TheIngenue.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 203,
        "fields": {
            "first_name": "",
            "last_name": "Yuri",
            "election": 20,
            "party": "Club Member",
            "state": "Keeping It Together",
            "priority": 4,
            "description": "<p>paragraph one.</p><p>paragraph two.",
            "color_hex": "#6c4681",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 1,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/TheMadwoman.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 204,
        "fields": {
            "first_name": "Monika",
            "last_name": "For President",
            "election": 20,
            "party": "",
            "state": "Top of the World",
            "priority": 5,
            "description": "'",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/CREEP.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Mike Pence is a former Congressman and the current Governor of Indiana. He is a popular figure among social conservatives and would help assuage concern about Trump among party insiders. He would add executive experience to the ticket and make few mistakes on the campaign trail, but he could also undercut Trump's outsider credentials.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 209,
        "fields": {
            "first_name": "Protag",
            "last_name": "For President",
            "election": 20,
            "party": "",
            "state": "Underdog",
            "priority": 9,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/tim-kaine-2016.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Tim Kaine has served as a Governor and Senator from Virginia, and shares similar political views to Hillary Clinton. He is fluent in both Spanish and English.</p><p>A lot of people see Kaine as a safe, experienced pick. He has little to offer to the wing of the party that supported Bernie Sanders during the nomination fight.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 214,
        "fields": {
            "first_name": "Sayori",
            "last_name": "For President",
            "election": 20,
            "party": "",
            "state": "Hopeless",
            "priority": 14,
            "description": "'",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 215,
        "fields": {
            "first_name": "Yuri",
            "last_name": "For President",
            "election": 20,
            "party": "",
            "state": "Flying Close to the Sun",
            "priority": 15,
            "description": "'",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50000,
        "fields": {
            "first_name": "Natsuki",
            "last_name": "For President",
            "election": 20,
            "party": "",
            "state": "Spoiling for a Fight",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#ffbbc3",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/TheBareKnuckler.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50001,
        "fields": {
            "first_name": "",
            "last_name": "Natsuki",
            "election": 20,
            "party": "Club Member",
            "state": "Could Be Worse",
            "priority": 1,
            "description": "<p>You're a fighter. Always have been. You have to be, when you've got a life like yours. You never had everything handed to you like that preppy bitch Monika. If you wanted something, you had to claw your way to it. People call you a tsundere. You call it being a survivor. They don't respect you. That's just fine. They will, soon enough.</p><p>And if there was ever a time to fight, it's now. You're not an idiot. You can see what's going on here. Everyone and everything is falling apart at the seams. This festival baloney- what the hell is Monika thinking? It's like she's asking for more moronic boys to come rushing in to sneer at you and ogle the others. And the others aren't much better. You can't describe it, but something is <i>wrong</i> with them. You'd better keep your head about you here.\n",
            "color_hex": "#ffbbc3",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/TheBareKnuckler.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>You're a fighter. Always have been. You have to be, when you've got a life like yours. You never had everything handed to you like that preppy bitch Monika. If you wanted something, you had to claw your way to it. People call you a tsundere. You call it being a survivor. They don't respect you. That's just fine. They will, soon enough.</p><p>And if there was ever a time to fight, it's now. You're not an idiot. You can see what's going on here. Everyone and everything is falling apart at the seams. This festival baloney- what the hell is Monika thinking? It's like she's asking for more moronic boys to come rushing in to sneer at you and ogle the others. And the others aren't much better. You can't describe it, but something is <i>wrong</i> with them. You'd better keep your head about you here.\n",
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 161,
        "fields": {
            "candidate": 203,
            "running_mate": 215
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 160,
        "fields": {
            "candidate": 202,
            "running_mate": 214
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 155,
        "fields": {
            "candidate": 201,
            "running_mate": 209
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 150,
        "fields": {
            "candidate": 200,
            "running_mate": 204
        }
    }
]

campaignTrail_temp.credits = "Person and metheguy. Music player from ROC2004"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203,
            50001
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203,
            50001
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2016,
        "is_premium": 0,
        "display_year": "2017- The Literature Trail"
    }
]

jet_data = {
    "headerColor": "#f9f9f9",
    "windowColor": "#ffbde1",
    "containerColor": "#FFFFFF",
    "innerWindowColor": "#fde7f3",
    "bannerImageUrl": "https://i.imgur.com/ajdsBjv.jpeg",
    "backgroundImageUrl": "https://i.imgur.com/KNTznwN.png",
    "endingTextColor": "#000000",
    "customQuote": "Okay, everyone!",
    "gameTitle": "THE LITERATURE TRAIL"
}

//#startcode


corrr = '\n              <h2>THE LITERATURE TRAIL</h2><font id="wittyquote" size="4" color="white"><em>Okay, everyone!</em></font>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#f9f9f9";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#ffbde1";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#FFFFFF";

document.getElementById("header").src = "https://i.imgur.com/ajdsBjv.jpeg";

document.body.background = "https://i.imgur.com/KNTznwN.png";

document.head.innerHTML += "<style>#results_container {color:#000000;}</style>";
document.head.innerHTML += `<style>
    label {
      font-size: 1em !important;
    }

    body {
      display: flex !important;
    }

    #game_window {
      max-width: 1000px;
    }
    .overlay_window {
      height: 65%;
      width: 55%;
    }
    #inner_window_2 {
    background-color: #e2e2e2;
  }
  #inner_window_3 {
    background-color: #e2e2e2;
  }
  #inner_window_4 {
    background-color: #e2e2e2;
  }
  .campaign_trail_start_emphasis {
    background-color: #e2e2e257;
  }


  </style>`
campaignTrail_temp.achievements = {
  }
  const div = document.getElementById('announcement');
  if (div) {
    div.style.display = 'none';      // 隐藏（不占位）
    // div.style.visibility = 'hidden'; // 隐藏（占位）
  }

  $("#game_start").click((event) => {
    event.preventDefault();
    $("#election_id_button").click((event) => {


        setInterval(changeFontColour, 200)

    })
  })


  e.runIntro = true;
  RecReading=true


  corrr = `
  <div style="font-size: 11px; font-family: monospace; color: white;">
    <h2 style="font-style: normal;">
      <img src="https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/header.jpg" alt="" style="margin-top: 5px;">
    </h2>
  </div>
  `;
  // Select the node that will be observed for mutations
  const windowsAdvisorTargetNode = document.getElementById("game_window");

  // Options for the observer (which mutations to observe)
  const windowsAdvisorConfig = { attributes: true, childList: true, subtree: true };

  // Callback function to execute when mutations are observed
  const callback = (mutationList, observer) => {
  visitWindow = document.getElementsByClassName("overlay_window")[0];

  if(visitWindow == null || visitWindow.classList.contains("done")) {
  return;
  }
  visitWindow.classList.add("done");
  visitWindow.classList.add("window");
  let titleBar = visitWindow.querySelector("h3");
  titleBar.classList.add("title-bar");
  titleBar.classList.add("title-bar-text")
  titleBar.style.paddingLeft = "3px";

  };

  class Song {
  constructor(title, artist, coverLink, audioLink) {
  this.title = title;
  this.artist = artist;
  this.coverLink = coverLink;
  this.audioLink = audioLink;
  }
  getTitle() {
  return this.title;
  }

  getArtist() {
  return this.artist;
  }
  getCoverLink() {
  return this.coverLink;
  }

  getAudioLink() {
  return this.audioLink;
  }
  }

  class Playlist {
    constructor() {
      // albums 数组，每个元素是一个专辑（歌曲数组）
      this.albums = [];
      this.currentAlbumIndex = 0;
      this.currentSongIndex = 0;
      this.loop = false; // 单曲循环状态
    }

    addSong(song, albumIndex) {
      if (!this.albums[albumIndex]) {
        this.albums[albumIndex] = [];
      }
      this.albums[albumIndex].push(song);
    }

    getCurrentSong() {
      return this.albums[this.currentAlbumIndex][this.currentSongIndex];
    }

    playNext() {
      if (this.loop) {
        return; // 单曲循环时不切换歌曲
      }
      let album = this.albums[this.currentAlbumIndex];
      this.currentSongIndex = (this.currentSongIndex + 1) % album.length;
    }

  playPrevious() {
    let album = this.albums[this.currentAlbumIndex];
    this.currentSongIndex = (this.currentSongIndex - 1 + album.length) % album.length;
  }
  nextAlbum() {
    // 切换到下一个专辑，并重置歌曲索引
    this.currentAlbumIndex = (this.currentAlbumIndex + 1) % this.albums.length;
    this.currentSongIndex = 0;
  }
  }
  window.Playlist = Playlist;
  window.Song = Song;


  function changePlaylist(newPlaylist) {
    playlist = newPlaylist;
    playlist.currentAlbumIndex = 0;
    playlist.currentSongIndex = 0;
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  }
  window.changePlaylist = changePlaylist;

  function updateUI(playlist) {
    const currentSong = playlist.getCurrentSong();
    var player = document.getElementById("player");
    player.querySelector("#cover").src = currentSong.getCoverLink();
    player.querySelector("#title").textContent = currentSong.getTitle();
    player.querySelector("#artist").textContent = currentSong.getArtist();
  }
  window.updateUI = updateUI;


  function setupMusicPlayer() {
    playlist = new Playlist();

    // 专辑 0：添加 song1~song4
    const song1 = new Song(
      "Doki Doki Literature Club!",
      "Dan Salvato",
      "https://i.scdn.co/image/ab67616d00001e023925fdf9a87edf2350632d60",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/Othello.mp3"
    );
    const song2 = new Song(
      "Doki Doki Forever",
      "OR3O",
      "https://i.scdn.co/image/ab67616d00001e022600b95e0c2301bc74cda1ed",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/Forever.mp3"
    );
    const song3 = new Song(
      "Doki Doki Nursery Club!",
      "SilvaGunner",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/PROTONOMICON.png",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/SilvaGunner.mp3"
    );
    const song6 = new Song(
      "Just Monika",
      "Random Encounters",
      "https://i.scdn.co/image/ab67616d00001e0286d8c8f1e12c851cd5b837d1",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/Random%20Encounters.mp3"
    );
    const song5 = new Song(
      "Why Did I Say Okie Doki?",
      "The Stupendium",
      "https://i.scdn.co/image/ab67616d00001e0265b60916e5be331634d94684",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/Stupendium.mp3"
    );
    const song4 = new Song(
      "Virus",
      "Andrew Stein",
      "https://i.scdn.co/image/ab67616d00001e02bcf1987bcf1fd030300292ca",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/Virus.mp3"
    );
    const song7 = new Song(
      "Delete Me",
      "Rockit Music",
      "https://i.scdn.co/image/ab67616d00001e024ab72db0ceaef31ec1d8d718",
      "https://file.garden/Z7qfmQZIZjO_xV5N/embarrasment/And%20i've%20got%20to%20say%2C%20in%20all%20honesty.%20Um...it's%20the%20biggest%20piece%20of%20dogshit%20that%20i%20have%20ever%20heard.mp3"
    );
    // 专辑 1：添加 song8~song14
    const song8 = new Song(
      "The Perfect Girl",
      "Mareux",
      "https://i.scdn.co/image/ab67616d00001e023d54a30e59638f60f56dd4e6",
      "https://file.garden/Z7qfmQZIZjO_xV5N/Newsom2.mp3"
    );
    const song9 = new Song(
      "Praise You",
      "Fatboy Slim",
      "https://i.scdn.co/image/ab67616d00001e02b8d6b39d1a3697df5558db0e",
      "https://audio.jukehost.co.uk/JTVLgjA0gtY5moZ8J07R7ZMgSB9xU17f"
    );
    const song10 = new Song(
      "Lightworks",
      "J Dilla",
      "https://i.scdn.co/image/ab67616d0000b27383bb78285449998bb974da45",
      "https://file.garden/Z7qfmQZIZjO_xV5N/TheNameOfTheGameIsLightworks.mp3"
    );
    const song11 = new Song(
      "Lovefool",
      "The Cardigans",
      "https://i.scdn.co/image/ab67616d00001e020aac8ca880151fda470e91af",
      "https://audio.jukehost.co.uk/YkqfqkyLq3JBxf3eS62po5jxXGUCWGTe"
    );
    const song12 = new Song(
      "Cannibals",
      "Neil Cicierega",
      "https://upload.wikimedia.org/wikipedia/en/2/2b/Mouth_Dreams.png",
      "https://file.garden/Z7qfmQZIZjO_xV5N/Cannibals.mp3"
    );
    const song13 = new Song(
      "O Superman",
      "Laurie Anderson",
      "https://i.scdn.co/image/ab67616d00001e02679340f56c596a303205912c",
      "https://file.garden/Z7qfmQZIZjO_xV5N/O%20Superman.mp3"
    );
    const song14 = new Song(
      "Power and Sacrifice",
      "Swans",
      "https://i.scdn.co/image/ab67616d00001e025f0a42bcbfe36c4e7bd9865c",
      "https://audio.jukehost.co.uk/yIS2QyFFLZY8WarNVLdjHcnwprbn9qH1"
    );
    //泛蓝歌曲
    const song15 = new Song(
      "Mambo No. 5",
      "Lou Bega",
      "https://i.scdn.co/image/ab67616d00001e02cf505191afa6a1978418fdf8",
      "https://file.garden/Z7qfmQZIZjO_xV5N/MamboNo.5.mp3"
    );
    const song16 = new Song(
      "Steam",
      "Peter Gabriel",
      "https://i.scdn.co/image/ab67616d0000b273c814b6fa04b61759289cf215",
      "https://file.garden/Z7qfmQZIZjO_xV5N/Steam.mp3"
    );
        const song21 = new Song(
      "Come On, Come On",
      "Smash Mouth",
      "https://i.scdn.co/image/ab67616d0000b2734f3bbf9631faeb8de9912a23",
      "https://file.garden/Z7qfmQZIZjO_xV5N/Come%20On%2C%20Come%20On.mp3"
    );
    const song17 = new Song(
     "Get Ready",
      "The Proclaimers",
      "https://m.media-amazon.com/images/I/71RREGIIXOL._UF1000,1000_QL80_.jpg",
      "https://file.garden/Z7qfmQZIZjO_xV5N/GetReady.mp3"
    );
    const song18 = new Song(
     "Livin' La Vida Loca",
      "Ricky Martin",
      "https://i.scdn.co/image/ab67616d0000b273e7e9b85cc1f021ec12130d80",
      "https://file.garden/ZRcfmLUQNGkxIJds/Ricky%20Martin%20-%20Livin'%20La%20Vida%20Loca%20(Audio).mp3"
    );
      const song19 = new Song(
     "Night Raid",
      "Huang Ying and Li Jian",
      "https://imgur.com/N7BTQpS.jpeg",
      "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%A4%9C%E8%A5%B2%20-%20Night%20Raid.mp3?v=1747597858834"
    );
        const song20 = new Song(
     "True Colors of the Hakka",
      "Wu Po-hsiung",
      "https://imgur.com/y18lvso.jpeg",
      "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%AE%A2%E5%AE%B6%E6%9C%AC%E8%89%B2.mp3?v=1747613612417"
    );

    //时代流行歌
  const song22 = new Song(
  "Love me don't leave",
  "Chang Chen-yue",
  "https://i.imgur.com/i6bYSdv.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E6%84%9B%E6%88%91%E5%88%A5%E8%B5%B0.mp3?v=1747599095364"
);

const song23 = new Song(
  "Ring Ring Ring",
  "S.H.E",
  "https://i.imgur.com/61zA51E.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/Ring%20Ring%20Ring%20S.H.E%20(%E6%AD%8C%E8%AF%8D%E7%89%88).mp3?v=1747600028942"
);

const song24 = new Song(
  "In The Name of The Father",
  "Jay Chou",
  "https://i.imgur.com/dFJMwCL.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%91%A8%E6%9D%B0%E5%80%AB%E8%91%89%E6%83%A0%E7%BE%8E%E5%B0%88%E8%BC%AF01.%20%E4%BB%A5%E7%88%B6%E4%B9%8B%E5%90%8D%20%5B%E5%8B%95%E6%85%8B%E6%AD%8C%E8%A9%9E%5D.mp3?v=1747599596492"
);

const song25 = new Song(
  "Don't wanna grow up",
  "S.H.E",
  "https://imgur.com/8Y3vOEN.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E4%B8%8D%E6%83%B3%E9%95%BF%E5%A4%A7%20S.H.E%20(%E6%AD%8C%E8%AF%8D%E7%89%88).mp3?v=1747599948511"
);

const song26 = new Song(
  "Ai Qing 36 Ji",
  "Jolin Tsai",
  "https://imgur.com/Sc214ec.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E8%94%A1%E4%BE%9D%E6%9E%97%20Jolin%20Tsai%20-%20%E6%84%9B%E6%83%85%E4%B8%89%E5%8D%81%E5%85%AD%E8%A8%88.mp3?v=1747600244089"
);

const song27 = new Song(
  "忠孝東路走九遍",
  "Power Station",
  "https://upload.wikimedia.org/wikipedia/zh/a/a6/%E5%BF%A0%E5%AD%9D%E6%9D%B1%E8%B7%AF%E8%B5%B0%E4%B9%9D%E9%81%8D.jpg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%8B%95%E5%8A%9B%E7%81%AB%E8%BB%8A%20Power%20Station%20%5B%20%E5%BF%A0%E5%AD%9D%E6%9D%B1%E8%B7%AF%E8%B5%B0%E4%B9%9D%E9%81%8D%20%5D%20Official%20Music%20Video.mp3?v=1747600390972"
);

const song28 = new Song(
  "The Smile On Your Face",
  "F.I.R.",
  "https://i.imgur.com/N4XYd45.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/F.I.R.%E9%A3%9B%E5%85%92%E6%A8%82%E5%9C%98%20-%20%E4%BD%A0%E7%9A%84%E5%BE%AE%E7%AC%91(%E6%AD%8C%E8%A9%9E%E7%89%88).mp3?v=1747600565798"
);
//台语
const song29 = new Song(
  "Air Alert",
  "Wu Bai & China Blue",
  "https://imgur.com/gGT6Y22.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E7%A9%BA%E8%A5%B2%E8%AD%A6%E5%A0%B1.mp3?v=1747600859169"
);
const song30 = new Song(
  "Love Song 1939",
  "Luo Da-you",
  "https://i.imgur.com/9C9x88w.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E6%88%80%E6%9B%B21939.mp3?v=1747601016746"
);

const song31 = new Song(
  "素蘭小姐要出嫁",
  "Wu Bai",
  "https://i.imgur.com/MQbUJmH.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E7%B4%A0%E8%98%AD%E5%B0%8F%E5%A7%90%E8%A6%81%E5%87%BA%E5%AB%81.mp3?v=1747601215834"
);

const song32 = new Song(
  "青蚵嫂",
  "江蕙",
  "https://i.imgur.com/kighdUp.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E9%9D%92%E8%9A%B5%E5%AB%82.mp3?v=1747601823509"
);

const song33 = new Song(
  "台北迎城隍",
  "Chen Lei",
  "https://i.imgur.com/BdPzuhn.jpeg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%8F%B0%E5%8C%97%E8%BF%8E%E5%9F%8E%E9%9A%8D.mp3?v=1747602316169"
);

const song34 = new Song(
  "再會啊港都",
  "江蕙",
  "https://lh3.googleusercontent.com/r9iC9NfZGTD734FteswfoFqq0_NlxW7jiq65-9st7txl4csyRkLbnWFU6_CGFcF3ETeKcsrIciFShhkivg",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%86%8D%E6%9C%83%E5%95%8A%E6%B8%AF%E9%83%BD.mp3?v=1747602516489"
);

const song35 = new Song(
  "快樂的出帆",
  "黃思婷",
  "https://lh3.googleusercontent.com/i4cbAsqvnBMKYoPimjrgInlQEeOw3JJD4AlNkr5ktcrjywe-Cbj7l1uiOBt0Y_Y-ULGNKxTKAETPBdk",
  "https://file.garden/Z9XHdyLGHwUEZPS4/%E5%BF%AB%E6%A8%82%E7%9A%84%E5%87%BA%E5%B8%86.mp3?v=1747602827120"
);

    // 将歌曲添加到对应专辑中
    playlist.addSong(song1, 0);
    playlist.addSong(song2, 0);
    playlist.addSong(song3, 0);
    playlist.addSong(song6, 0);
    playlist.addSong(song5, 0);
    playlist.addSong(song4, 0);
    playlist.addSong(song7, 0);
    playlist.addSong(song8, 1);
    playlist.addSong(song9, 1);
    playlist.addSong(song10, 1);
    playlist.addSong(song11, 1);
    playlist.addSong(song12, 1);
    playlist.addSong(song13, 1);
    playlist.addSong(song14, 1);
    playlist.addSong(song15, 2);
    playlist.addSong(song16, 2);
    playlist.addSong(song17, 2);
    playlist.addSong(song18, 2);
    playlist.addSong(song19, 2);
    playlist.addSong(song20, 2);
     playlist.addSong(song21, 2);
    playlist.addSong(song22, 3);
playlist.addSong(song23, 3);
playlist.addSong(song24, 3);
playlist.addSong(song25, 3);
playlist.addSong(song26, 3);
playlist.addSong(song27, 3);
playlist.addSong(song28, 3);
playlist.addSong(song29, 4);
playlist.addSong(song30, 4);
playlist.addSong(song31, 4);
playlist.addSong(song32, 4);
playlist.addSong(song33, 4);
playlist.addSong(song34, 4);
playlist.addSong(song35, 4);

  const playerContainer = document.createElement("div");
  playerContainer.id = "player";

  const displayBox = document.createElement("div");
  displayBox.id = "display-box";

  const coverElement = document.createElement("img");
  coverElement.id = "cover";
  displayBox.appendChild(coverElement);

  const infoContainer = document.createElement("div");
  infoContainer.id = "info-container";
  infoContainer.style.backgroundImage = "url('https://i.imgur.com/xyxCkA0.png')";
  infoContainer.style.backgroundSize = "cover"; // Optional: adjust based on your needs
  infoContainer.style.color = "white"; // Set text color to white

  const songInfo = document.createElement("div");
  songInfo.id = "song-info";

  const titleElement = document.createElement("h3");
  titleElement.id = "title";
  titleElement.style.fontWeight = 'normal'; // Make it normal as per previous request
  songInfo.appendChild(titleElement);

  const artistElement = document.createElement("p");
  artistElement.id = "artist";
  songInfo.appendChild(artistElement);

  infoContainer.appendChild(songInfo);
  displayBox.appendChild(infoContainer);

  playerContainer.appendChild(displayBox);

  const controlsContainer = document.createElement("div");
  controlsContainer.id = "controls-container";

  const controls = document.createElement("div");
  controls.id = "controls";

  const prevButton = document.createElement("img");
  prevButton.id = "prevButton";
  prevButton.src = "https://i.imgur.com/jdfFCvo.png";
  prevButton.alt = "Previous";
  controls.appendChild(prevButton);

  const playPauseButton = document.createElement("img");
  playPauseButton.id = "playPauseButton";
  playPauseButton.src = "https://i.imgur.com/7ofdqdY.png"; // Set the default play image
  playPauseButton.alt = "Play/Pause";
  controls.appendChild(playPauseButton);

  const nextButton = document.createElement("img");
  nextButton.id = "nextButton";
  nextButton.src = "https://i.imgur.com/B0ScI0A.png";
  nextButton.alt = "Next";
  controls.appendChild(nextButton);

  const nextalbum = document.createElement("img");
  nextalbum.id = "nextalbum";
  nextalbum.src = "https://i.imgur.com/NeUObQA.png";
  nextalbum.alt = "album";
  controls.appendChild(nextalbum);

  const loopButton = document.createElement("img"); // 单曲循环按钮
    loopButton.id = "loopButton";
    loopButton.src = "https://i.imgur.com/PGcDNau.png"; // 请替换为实际的图标
    loopButton.alt = "Loop";
    controls.appendChild(loopButton);

  controlsContainer.appendChild(controls);
  function updateProgressBar(value) {
    const progressBar = document.getElementById('progress-bar');
    progressBar.style.setProperty('--fill-width', `${value}%`);
}

// 示例：模拟进度更新
let progress = 0;
setInterval(() => {
    progress += 1;
    if (progress > 100) progress = 0; // 循环重置
    updateProgressBar(progress);
}, 100);
  playPauseButton.addEventListener("click", function () {
  const audio = document.getElementById("audio");
  if (audio.paused) {
  audio.play();
  playPauseButton.src = "https://i.imgur.com/7ofdqdY.png"; // Set the pause image
  } else {
  audio.pause();
  playPauseButton.src = "https://i.imgur.com/F5Cd7o6.png"; // Set the play image
  }
  });

  nextButton.addEventListener("click", function () {
  playlist.playNext();
  updateUI(playlist);
  const audio = document.getElementById("audio");
  audio.src = playlist.getCurrentSong().audioLink;
  audio.play();
  });

  nextalbum.addEventListener("click", function () {
    playlist.nextAlbum();
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  });

  prevButton.addEventListener("click", function () {
    playlist.playPrevious();
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  });
  loopButton.addEventListener("click", function () { // 单曲循环按钮事件
  playlist.loop = !playlist.loop;
  loopButton.src = playlist.loop ? "https://i.imgur.com/Ssx40A9.png" : "https://i.imgur.com/PGcDNau.png"; // 请替换为实际的图标
});
  const progressBarContainer = document.createElement("div");
  progressBarContainer.id = "progress-bar-container";


  const progressBar = document.createElement("input"); // 改为 input type="range"
  progressBar.type = "range";
  progressBar.id = "progress-bar";
  progressBar.value = "0";
  progressBar.min = "0";
  progressBar.max = "100";
  progressBar.step = "0.1";



  progressBarContainer.appendChild(progressBar);
  controlsContainer.appendChild(progressBarContainer);
  playerContainer.appendChild(controlsContainer);

  const volumeContainer = document.createElement("div");
  volumeContainer.id = "volume-container";

  const volumeLabel = document.createElement("img");
  volumeLabel.src = "https://i.imgur.com/1iKbM8E.png";
  volumeLabel.alt = "Volume";
  volumeContainer.appendChild(volumeLabel);

  const volumeSliderContainer = document.createElement("div");
  volumeSliderContainer.classList.add("is-vertical");
  volumeSliderContainer.style.marginLeft = "0%";
  volumeSliderContainer.style.height = "126px";

  const volumeSlider = document.createElement("input");
  volumeSlider.type = "range";
  volumeSlider.id = "volumeSlider";
  volumeSlider.min = 0;
  volumeSlider.max = 9;
  volumeSlider.step = 1;
  volumeSlider.value = 5; // Initial volume

  volumeSliderContainer.appendChild(volumeSlider);

  const volumeDisplay = document.createElement("span");
  volumeDisplay.id = "volume-display";
  volumeDisplay.style.fontWeight = 'bold';
  volumeDisplay.style.display = 'none';
  volumeDisplay.textContent = "1";

  volumeContainer.appendChild(volumeSliderContainer);
  volumeContainer.appendChild(volumeDisplay);

  playerContainer.appendChild(volumeContainer);

  gameWindow_player.insertAdjacentElement("afterend", playerContainer);


  function updateProgressBar() {
    const audio = document.getElementById("audio");
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBar.value = isNaN(progress) ? 0 : progress;
  }


  progressBar.addEventListener("input", function () { // 拖动进度条事件
  const audio = document.getElementById("audio");
  const seekTime = (progressBar.value / 100) * audio.duration;
  audio.currentTime = isNaN(seekTime) ? 0 : seekTime;
});

const audio = document.createElement("audio");
audio.id = "audio";
audio.src = playlist.getCurrentSong().audioLink;
audio.volume = 1/9;
audio.play().catch(err => {
  if (err.name !== 'AbortError') {
    console.error('播放失败:', err);
  }
  // AbortError 可以安全忽略
});


  audio.addEventListener("timeupdate", updateProgressBar);
  audio.addEventListener("ended", function () {
  // Play the next song when the current song ends
  playlist.playNext();
  updateUI(playlist);
  audio.src = playlist.getCurrentSong().audioLink;
  audio.play();
  });

  let currentVolume = 5; // Initial volume

  volumeSlider.addEventListener("input", function () {
  currentVolume = parseInt(volumeSlider.value, 10);
  updateVolumeDisplay();
  updateAudioVolume();
  });

  function updateVolumeDisplay() {
  volumeDisplay.textContent = currentVolume;
  }

  function updateAudioVolume() {
  const audio = document.getElementById("audio");
  audio.volume = currentVolume / 9; // Set volume between 0 and 1
  }

  document.body.appendChild(audio);
  audio.play();

  // Update the UI when the page loads
  updateUI(playlist);
  }

  const style = document.createElement("style");
  style.textContent = `
  #player {
  border: 3px solid #C9C9C9; /* Add your desired border style */
  display: flex;
  flex-direction: row;
  height:191px;
  background-Image: url("https://i.imgur.com/CweYzgR.png");
  }
  #volume-container{
      margin-top:10px

  }
  #display-box {
  display: flex;
  align-items: center;
  width: 50%;
  }

  #cover {
  width: 176px;
  height:176px;
  }

  #info-container {
  display: flex;
  flex-direction: row;
  height:178px;
  width:127px;
  margin-top: 3px;
  }

  #song-info {
  width: 100%;
  padding:5px;
  }
  #state_info {
    height:auto;
  }
  #overall_result_container {
    height:auto;
  }
  #controls-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px;
  width:100%;
  padding-top:15px;

  }
  .is-vertical #volumeSlider {
      margin-top: 38px;
      -webkit-appearance: none;
      appearance: none;
      height: 15%; /* 音量条的高度 */
      background: linear-gradient(to bottom, #d4d0c8, #f1f1f1); /* XP 背景 */
      border-radius: 5px;
      border: 2px solid #808080;
      box-shadow: inset 2px 2px 3px rgba(0, 0, 0, 0.3);
      transform: rotate(270deg); /* 将音量条旋转90度，实现垂直显示 */
      transform-origin: center center; /* 保持旋转的中心 */
  }
  .is-vertical #volumeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    background: green; /* 改为绿色 */
    border-radius: 50%;
    border: 2px solid #808080;
    box-shadow: 0px 0px 5px rgba(255, 255, 255, 0.6);
    cursor: pointer;
}

.is-vertical #volumeSlider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    background: green; /* 改为绿色 */
    border-radius: 50%;
    border: 2px solid #808080;
    box-shadow: 0px 0px 5px rgba(255, 255, 255, 0.6);
    cursor: pointer;
}

#overall_vote_statistics {

}
.final_results_table tbody tr:nth-child(2) td:first-child {
  background-image: url(https://i.imgur.com/1uBGXls.png);
  background-repeat: no-repeat;
  background-position: right;
  background-size: contain;
}

#overall_election_details tbody tr:nth-child(2) td:first-child {
  background-image: url(https://i.imgur.com/1uBGXls.png);
  background-repeat: no-repeat;
  background-position: right;
  background-size: contain;
}
#results_container {
  color: white;
  overflow: auto;
}
  #controls {
  display: flex;
  flex-direction: row;
  justify-content: center;
  width: 80%;
  }
  .person_image {
    position: sticky;
    top: 16px;
    align-self: flex-start;
    z-index: 1;
    float: left;
    margin: 1.2em 1em 0;
    border: double;
    border-color: #C9C9C9;
    height: 250px;
}

#progress-bar-container {
    width: 80%; /* 与原代码一致 */
    height: 18px; /* 调大高度，从 18px 增加到 24px */
    background: linear-gradient(to bottom, #d4d0c8, #f1f1f1); /* 原容器背景 */
    border: 2px solid #808080; /* 原边框 */
    border-radius: 5px; /* 原圆角 */
    padding: 2px; /* 移除内边距以消除空隙 */
    box-shadow: inset 2px 2px 2px rgba(0, 0, 0, 0.2); /* 原阴影 */
    // box-sizing: border-box; /* 确保边框包含在尺寸内 */
}

#progress-bar {
    width: 100%;
    height: 100%; /* 充满容器高度 */
    -webkit-appearance: none;
    appearance: none;
    background: transparent; /* 背景透明，显示容器背景 */
    border: none; /* 移除边框 */
    margin: 0; /* 移除边距 */
    // border-radius: 5px; /* 与容器一致 */
    overflow: hidden; /* 防止溢出 */
    display: block; /* 确保占满容器 */
}

#progress-bar::-webkit-slider-runnable-track {
    width: 100%;
    height: 100%; /* 轨道充满容器 */
    background: #888; /* 未填充部分的灰色背景 */
    margin: 0; /* 移除轨道边距 */
}

#progress-bar::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 0; /* 隐藏滑块 */
    height: 0; /* 隐藏滑块 */
    background: transparent; /* 透明背景 */
    box-shadow: -100vw 0 0 100vw green; /* 绿色填充整个左侧 */
}

#progress-bar::-moz-range-track {
    width: 100%;
    height: 100%; /* 轨道充满容器 */
    background: #A9A9A9; /* 未填充部分的灰色背景 */
    border-radius: 5px;
}

#progress-bar::-moz-range-progress {
    background: green; /* 填充部分为绿色 */
    height: 100%; /* 充满轨道高度 */
    border-radius: 5px;
}

#progress-bar::-moz-range-thumb {
    width: 0; /* 隐藏滑块 */
    height: 0; /* 隐藏滑块 */
    background: transparent; /* 透明背景 */
}

#progress-bar::-webkit-slider-thumb,
#progress-bar::-moz-range-progress {
    transition: all 0.3s ease; /* 平滑过渡 */
}
  `;


  document.head.appendChild(style);

  const gameWindow_player = document.getElementById("game_window");
  //use this function directly or put it in an event listener to start the music on the press of a certain button
  setupMusicPlayer();

  function createBanner(url, sibling, isLeft) {
    let div = document.createElement("DIV");
    let img = document.createElement("IMG");
    div.style.position = "relative";
    div.style.margin = "auto";
    img.src = url;


    let x = document.createElement("DIV");
    x.innerText = "✕";
    x.style.position = "absolute";
    x.style.top = "0px";
    x.style.left = "0px";
    x.style.padding = "0px 2px";
    x.style.fontSize = "9px";
    x.style.fontWeight = "bold";
    x.style.fontFamily = "Arial, sans-serif";
    x.style.color = "black";
    x.style.backgroundColor = "#ccc";
    x.style.border = "1px solid #666";
    x.style.cursor = "pointer";
    x.style.zIndex = "9999";
    x.style.userSelect = "none";
    x.style.lineHeight = "12px";

    x.addEventListener("click", function() {
      div.removeChild(x);
    });

    div.appendChild(x);

    div.appendChild(img);

    if(isLeft) {
    sibling.parentNode.insertBefore(div, sibling);
    }
    else {
    sibling.parentNode.appendChild(div);
    }
    // x.onclick = () => div.style.visibility = "hidden";
    // x.onclick = () => img.style.visibility = "hidden";
    // x.onclick = () => {
    //   img.remove();      // 直接把 <img> 从文档中删除
    //   // 或者，如果你还想把它的父容器也删掉：
    //   // div.remove();
    // };
    x.addEventListener("mousedown", function(e) {
      e.stopPropagation();
      if (div && div.parentNode) {
        div.parentNode.removeChild(div);
      }
    });
    return img;
    }

//侧边广告

let contentBox = document.getElementsByClassName("content_box")[0];
let contentSingle = document.getElementsByClassName("content_single")[0];

let containerRef = document.getElementsByClassName("container")[0];

function createBanner(url, sibling, isLeft) {
let div = document.createElement("DIV");
let img = document.createElement("IMG");
div.style.position = "relative";
div.style.margin = "auto";
img.src = url;


let x = document.createElement("DIV");
x.innerText = "✕";
x.style.position = "absolute";
x.style.top = "0px";
x.style.left = "0px";
x.style.padding = "0px 2px";
x.style.fontSize = "9px";
x.style.fontWeight = "bold";
x.style.fontFamily = "Arial, sans-serif";
x.style.color = "black";
x.style.backgroundColor = "#ccc";
x.style.border = "1px solid #666";
x.style.cursor = "pointer";
x.style.zIndex = "9999";
x.style.userSelect = "none";
x.style.lineHeight = "12px";

x.addEventListener("click", function() {
  div.removeChild(x);
});

div.appendChild(x);

div.appendChild(img);

if(isLeft) {
sibling.parentNode.insertBefore(div, sibling);
}
else {
sibling.parentNode.appendChild(div);
}
// x.onclick = () => {
//   img.remove();      // 直接把 <img> 从文档中删除
//   // 或者，如果你还想把它的父容器也删掉：
//   // div.remove();
// };

x.addEventListener("mousedown", function(e) {
  e.stopPropagation();
  if (div && div.parentNode) {
    div.parentNode.removeChild(div);
  }
});
return img;
}

//抄的，先暂时不用，版面太小而且问题跳来跳去，保留着以后备用
async function appendStyle() {
  var metaTag=document.createElement('meta');
 metaTag.name = "viewport";
  metaTag.content = "width=device-width, initial-scale=1";
document.getElementsByTagName('head')[0].appendChild(metaTag);

 if (!document.querySelector('#radio-option-style')) {
       let style = document.createElement('style');
     style.type = 'text/css';
    style.id = 'radio-option-style';
      style.innerHTML = `
     .inner_inner_window {
      display: flex;
      flex-direction: column;
   }

    .inner_window_question {
        height: 337px;
    }
    `;
    document.head.appendChild(style);
 }
}

appendStyle();



function addDynamicCSS() {
    var css = `

        .inner_window_question h3 .mytooltip{
            background-color: lightskyblue;
        }
        .inner_window_question h3 {
          background: linear-gradient(to bottom, #f9f9f9, #eff1ff, #e4e4e4);
        }
        .mytooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background-color: #d8dee8;
        }

        .mytooltip .mytooltiptext {
            width: 240px;
            background-color: #d8dee8;
            color: black;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 99;
            bottom: 20%;
            left: 20%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid black;
            pointer-events: none;
            font-size: 13px !important;
            line-height: 1.5em !important;
            font-weight: normal !important;
            font-style: normal !important;
        }
        #results_container {
          color:white;
        }
        #overall_details_container h3 {
          color: white;
      }
      #overall_election_details h4 {
        color: white;
    }
        .mytooltip .mytooltiptext img {
            max-width: 240px;
            height: auto;
        }

        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }
        .overlay_window img {
          border-color:black;
        }
        #visit_content img {
          opacity: 0.95;
          width: 260px;
          height: auto;
          border: 1px solid transparent;
          outline: 1px solid #201F1A;
          box-shadow: none !important;
      }
    `;

    var styleElem = document.createElement('style');
    styleElem.type = 'text/css';

    styleElem.appendChild(document.createTextNode(css));

    document.head.appendChild(styleElem);
}

const xpScrollStyle = document.createElement('style');
xpScrollStyle.textContent = `body *::-webkit-scrollbar {
    width: 16px;
    height: 16px;
    background: none;
  }

  body *::-webkit-scrollbar-thumb, body *::-webkit-scrollbar-button {
    width: 16px;
    height: 16px;
    background: silver;
    box-shadow: inset 1px 1px #dfdfdf, inset -1px -1px gray;
    border: 1px solid;
    border-color: silver #000 #000 silver;
  }

  body *::-webkit-scrollbar-track {
    image-rendering: optimizeSpeed;
    image-rendering: pixelated;
    image-rendering: optimize-contrast;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTAuNSAyIDIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyI+CjxtZXRhZGF0YT5NYWRlIHdpdGggUGl4ZWxzIHRvIFN2ZyBodHRwczovL2NvZGVwZW4uaW8vc2hzaGF3L3Blbi9YYnh2Tmo8L21ldGFkYXRhPgo8cGF0aCBzdHJva2U9IiNjMGMwYzAiIGQ9Ik0wIDBoMU0xIDFoMSIgLz4KPC9zdmc+");
    background-position: 0 0;
    background-repeat: repeat;
    background-size: 2px;
  }

  body *::-webkit-scrollbar-button {
    background-repeat: no-repeat;
    background-size: 16px;
  }

  body *::-webkit-scrollbar-button:single-button:vertical:decrement {
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTAuNSAxNiAxNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIj4KPG1ldGFkYXRhPk1hZGUgd2l0aCBQaXhlbHMgdG8gU3ZnIGh0dHBzOi8vY29kZXBlbi5pby9zaHNoYXcvcGVuL1hieHZOajwvbWV0YWRhdGE+CjxwYXRoIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTcgNWgxTTYgNmgzTTUgN2g1TTQgOGg3IiAvPgo8L3N2Zz4=");
  }

  body *::-webkit-scrollbar-button:single-button:vertical:increment {
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTAuNSAxNiAxNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIj4KPG1ldGFkYXRhPk1hZGUgd2l0aCBQaXhlbHMgdG8gU3ZnIGh0dHBzOi8vY29kZXBlbi5pby9zaHNoYXcvcGVuL1hieHZOajwvbWV0YWRhdGE+CjxwYXRoIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTQgNWg3TTUgNmg1TTYgN2gzTTcgOGgxIiAvPgo8L3N2Zz4=");
  }

  body *::-webkit-scrollbar-button:single-button:horizontal:decrement {
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTAuNSAxNiAxNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIj4KPG1ldGFkYXRhPk1hZGUgd2l0aCBQaXhlbHMgdG8gU3ZnIGh0dHBzOi8vY29kZXBlbi5pby9zaHNoYXcvcGVuL1hieHZOajwvbWV0YWRhdGE+CjxwYXRoIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTggM2gxTTcgNGgyTTYgNWgzTTUgNmg0TTYgN2gzTTcgOGgyTTggOWgxIiAvPgo8L3N2Zz4=");
  }

  body *::-webkit-scrollbar-button:single-button:horizontal:increment {
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgLTAuNSAxNiAxNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIj4KPG1ldGFkYXRhPk1hZGUgd2l0aCBQaXhlbHMgdG8gU3ZnIGh0dHBzOi8vY29kZXBlbi5pby9zaHNoYXcvcGVuL1hieHZOajwvbWV0YWRhdGE+CjxwYXRoIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTYgM2gxTTYgNGgyTTYgNWgzTTYgNmg0TTYgN2gzTTYgOGgyTTYgOWgxIiAvPgo8L3N2Zz4=");
  }

  body *::-webkit-scrollbar-corner {
    background: silver;
  }`;
document.head.appendChild(xpScrollStyle);
const win98BtnStyle = document.createElement('style');
win98BtnStyle.textContent = `
 /* 针对所有按钮及 input[type=button|submit|reset] */
button,
input[type="button"],
input[type="submit"],
input[type="reset"] {
  /* 字体和大小 */
  font-family: "MS Sans Serif", Tahoma, sans-serif;
  font-size: 12px;
  color: #000;

  /* 背景和边框 */
  background-color: #C0C0C0;    /* Win98 系统灰 */
  border: 2px outset #FFF;      /* 外凸边框 */

  /* 内边距 & 大小 */
  padding: 2px 8px;
  line-height: 1.2;
  cursor: pointer;

  /* 去除浏览器默认阴影 */
  box-shadow: none;
}

/* 鼠标悬停略微加深以示可点击 */
button:hover,
input[type="button"]:hover,
input[type="submit"]:hover,
input[type="reset"]:hover {
  background-color: #D4D0C8;
}

/* 按下时凹陷 */
button:active,
input[type="button"]:active,
input[type="submit"]:active,
input[type="reset"]:active {
  border-style: inset;
  background-color: #C0C0C0;
}

/* 获得焦点时的虚线框（Win98 风格） */
button:focus,
input[type="button"]:focus,
input[type="submit"]:focus,
input[type="reset"]:focus {
  outline: 1px dotted #000;
}

/* 可选：禁用状态 */
button:disabled,
input[type="button"]:disabled,
input[type="submit"]:disabled,
input[type="reset"]:disabled {
  background-color: #E0E0E0;
  color: #808080;
  border: 2px outset #FFF;
  cursor: default;
}
`;
document.head.appendChild(win98BtnStyle);
const win98FormStyle = document.createElement('style');
win98FormStyle.textContent = `/* 通用字体 */
.windows98-ui {
  font-family: "MS Sans Serif", Tahoma, sans-serif;
  font-size: 12px;
  color: #000;
}

/* —— 下拉框 Select —— */
select {
  font-family: inherit;
  font-size: inherit;
  color: inherit;

  background-color: #C0C0C0;
  border: 2px outset #FFF;
  /* 左右内边距，右侧留出给箭头 */
  padding: 2px 20px 2px 4px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;

  /* 箭头放在更右侧 */
  background-image:
    url("data:image/svg+xml;charset=UTF-8,<svg xmlns='http://www.w3.org/2000/svg' width='8' height='6'><polygon points='0,0 8,0 4,6' fill='%23000'/></svg>");
  background-repeat: no-repeat;
  background-position: right 6px center;
}

/* IE 下隐藏自带箭头 */
select::-ms-expand {
  display: none;
}

select:focus {
  outline: 1px dotted #000;
}
select {
  color:black;
}
select:disabled {
  background-color: #E0E0E0;
  color: #808080;
  cursor: default;
}

/* 如果需要更平整的箭头位置，可微调内边距 */
select::-ms-expand {
  display: none;
}

/* —— 表格 Table —— */
/* 让所有表格单元格都用 border-box */
table, th, td {
  box-sizing: border-box;
}

/* 整体表框改为 1px groove，不影响宽度 */
table {
  border-collapse: collapse;      /* 合并边框 */
  border: 1px groove #C0C0C0;     /* 从 2px 改为 1px */
  background-color: #FFF;
}

/* 交替行和 hover 样式不变 */
table tr:nth-child(even) td {
  background-color: #F0F0F0;
}
table tr:hover td {
  background-color: #C0C0C0;
}`;
document.head.appendChild(win98FormStyle);

const win98FontStyle = document.createElement('style');
win98FontStyle.textContent = `
 /* 全局 Windows 98 系统字体 */
html, body,
button, input, select, textarea,
table, th, td,
h1, h2, h3, h4, h5, h6,
p, span, div, a, li {
  font-family: "MS Sans Serif", Tahoma, Arial, sans-serif;
}
#final_results_description h3{
  font-size: 1em;
}
label {
  font-family: inherit;
}
/* 如果需要更像像素字体，可以加上 */
body {
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
}
.content_single p{
  line-height: 1.3em;
}
.css-id.css-id{
  background-color: #ffffff;
  padding: 24px;
  border: 4px double #bababa;
  font-family: 'Times New Roman', serif;
  color: #273450;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
  margin: 1rem auto;
  max-width: 610px;
  line-height: 1.6;
  margin-right: 1em;
}
.css-id h3{
  font-family: 'Times New Roman', serif;
}
.css-id p{
  font-family: 'Times New Roman', serif;
}
.css-id h1{
  font-family: 'Times New Roman', serif;
}
.css-id h2{
  font-family: 'Times New Roman', serif;
}
.css-id span{
  font-family: 'Times New Roman', serif;
}
`;
document.head.appendChild(win98FontStyle);

addDynamicCSS();
// Global text variables
e.SelectText = 'Please select the poem you will read:';
e.CandidText = 'Please select your character:';
e.VpText = 'Please select the campaign you will run:';
e.HomeStateText = "Status:";
e.PartyText = "Role:";

//#endcode
